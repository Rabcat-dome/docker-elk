input {
	# beats {
	# 	port => 5044
	# }

	# tcp {
	# 	port => 50000
	#	codec => line { charset => "Shift_JIS" }
	# }

	gelf {
    	id => "gelf"
    	use_udp => false
    	use_tcp => true
  	}
}

filter {
  prune {
   blacklist_names => [ "source_host", "className", "facility" ]
  }
  mutate {
    # Sets the default value for application, in case someone forgot to set it in their
    # Gelf configuration
    coerce => { "application" => "unknown_application" }
  }
}

output {
	# (Un)comment for debugging purposes
	stdout { codec => rubydebug }
	elasticsearch {
		hosts => "elasticsearch:9200"
		user => "logstash_internal"
		password => "${LOGSTASH_INTERNAL_PASSWORD}"
		index => "app-%{application}-%{+YYYY.MM.dd}"
	}
}
